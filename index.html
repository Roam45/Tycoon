// Autoclicker detection variables
let lastClickTime = 0;
let clickCount = 0;
const maxClicksPerSecond = 40; // 40 CPS limit
const clickResetTime = 1000; // 1 second window

// Function to reset the game
function resetGame() {
    money = 0;
    moneyPerClick = 1;
    businessLevel = 1;
    conveyorCount = 0;
    conveyorIncome = 0;
    upgradeCost = 50;
    conveyorCost = 100;
    selectedBusiness = null;
    saveGame();
    showBusinessSelectionScreen();
}

// Event listener for the "earn money" button
earnMoneyButton.addEventListener("click", () => {
    const currentTime = Date.now();

    // Check if the click rate exceeds CPS limit
    if (lastClickTime && currentTime - lastClickTime < clickResetTime / maxClicksPerSecond) {
        clickCount++;
        if (clickCount > maxClicksPerSecond) {
            alert("Autoclicker detected! Game has been reset.");
            resetGame();
            return;
        }
    } else {
        clickCount = 1; // Reset click count for a new period
    }

    lastClickTime = currentTime;

    money += moneyPerClick;
    saveGame();
    updateDisplay();
});
